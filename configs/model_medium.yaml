# VAE-DiT TTS â€” Medium Config (~400M DiT)

vae:
  model_path: "model_files/vae"   # local path or HuggingFace ID
  precision: "fp16"
model:
  # DiT
  # DiT (Large ~500M)
  latent_dim: 64
  dit_dim: 1280             # Increased from 1024
  depth: 28                 # Increased from 22
  heads: 20                 # Increased from 16 (1280 / 20 = 64 head_dim)
  head_dim: 64
  ff_mult: 2.5              # FFN intermediate = dit_dim * ff_mult

  # Text Encoder
  text_encoder_name: "google/mt5-large"
  text_encoder_dim: 1024
  freeze_text_encoder: true

  # Duration Predictor
  duration_hidden_dim: 512
  duration_num_layers: 2

  # Flow Matching
  cfg_dropout_rate: 0.15
  default_cfg_scale: 3.0
  default_infer_steps: 30

audio:
  sample_rate: 48000
  latent_rate: 25
  max_duration_sec: 30
  min_duration_sec: 3
  prompt_ratio_min: 0.2
  prompt_ratio_max: 0.5

training:
<<<<<<< HEAD
  batch_size: 32            # Reduce if VRAM limited (e.g., to 16 or 24)
  learning_rate: 5.0e-5     # Slightly lower LR for larger model
=======
  # batch_size: 32
  batch_size: 4
  learning_rate: 1.0e-4
>>>>>>> ed710ef38dbcdb185e7148c60030ccfed17effb7
  weight_decay: 0.01
  warmup_steps: 5000
  max_steps: 500000
  scheduler: cosine
  gradient_clip: 1.0
  fp16: true
  gradient_accumulation_steps: 1
